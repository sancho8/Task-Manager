@{
    ViewBag.Title = "Tasks";
}

@{
    List<SelectListItem> priorityList = new List<SelectListItem>();
    priorityList.Add(new SelectListItem()
    {
        Text = "A",
        Value = "A",
        Selected = true
    });
    priorityList.Add(new SelectListItem()
    {
        Text = "B",
        Value = "B",
    });
    priorityList.Add(new SelectListItem()
    {
        Text = "C",
        Value = "C"
    });
    priorityList.Add(new SelectListItem()
    {
        Text = "D",
        Value = "D"
    });
}
<div id="container">
    @ViewBag.IsLoggedIn
    @using (Html.BeginForm("LogInUser", "Auth", FormMethod.Post))
    {
        @Html.TextBox("login", "", new { @type = "text", @placeholder = "введите логин" })
        @Html.TextBox("password", "", new { @type = "password", @placeholder = "введите пароль" })
        <input type="submit" value="Войти">
        <input type="submit" value="Выйти" href="@Url.Action("LogOutUser", "Auth")">
        <input type="submit" value="Зарегистрироваться" href="@Url.Action("RedirectTo", "Home", new { view = "RegistrationPage" })">
    }
    <table class="table-bordered">
        <thead>
            <tr>
                <th>Description @Html.ActionLink(" ", "OrderTasks", "Task", new { prop = "Description" }, new { @class = "glyphicon glyphicon-chevron-down" })</th>
                <th>Data @Html.ActionLink(" ", "OrderTasks", "Task", new { prop = "Data" }, new { @class = "glyphicon glyphicon-chevron-down" })</th>
                <th>Priority @Html.ActionLink(" ", "OrderTasks", "Task", new { prop = "Priority" }, new { @class = "glyphicon glyphicon-chevron-down" })</th>
                <th>Number @Html.ActionLink(" ", "OrderTasks", "Task", new { prop = "Number" }, new { @class = "glyphicon glyphicon-chevron-down" })</th>
                <th>Completed @Html.ActionLink(" ", "OrderTasks", "Task", new { prop = "IsCompleted" }, new { @class = "glyphicon glyphicon-chevron-down" })</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var t in ViewBag.Tasks)
            {
                <tr>
                    <td class="redact">
                        @t.Description
                        <input type="text" style='display:none' class="change-desc-input">
                    </td>
                    <td class="redact">@t.Data </td>
                    <td class="redact">@t.Priority </td>
                    <td class="redact">@t.Number</td>
                    @if (t.IsComplete)
                {
                        <td><input type="checkbox" checked="checked" onchange="TaskStatusChanged()"></td>}
                else
                {
                        <td><input type="checkbox" onchange="TaskStatusChanged()" /></td>}
                    <td>
                        <a href="#" onclick="EditTask(this)" class="edit"><span class="glyphicon glyphicon-edit"></span></a>
                        <a href="#" onclick="SaveTask(this)" style="display:none" class="save"><span class="glyphicon glyphicon-floppy-disk"></span></a>
                    </td>
                    <td>@Html.ActionLink(" ", "DeleteTask", "Task", new { id = @t.Id.ToString() }, new { @class = "glyphicon glyphicon-remove" })</td>
                </tr>
            }
        </tbody>
    </table>
    @using (Html.BeginForm("AddTask", "Task", FormMethod.Post))
    {
        @Html.TextBox("description", "", new { @type = "text", @placeholder = "Введите задание" })
        @Html.TextBox("data", "", new { @type = "datetime-local", @placeholder = "Введите дату" })
        <label for="priotity">Приоритет:</label>
        @Html.DropDownList("priority", priorityList, new { @placeholder = "Выберите приоритет" })
        @Html.TextBox("number", "", new { @type = "number", @placeholder = "Введите номер" })
        <input type="submit" value="Добавить">
    }
</div>

